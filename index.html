<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>BROADCAST.EXE — Ночной эфир</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Локальные мелочи под Win95 для ленты */
    .badge95{ display:inline-block; padding:2px 6px; border:1px solid var(--95-dark,#808080); background:#efefef; color:#000; font-size:12px; }
    .feed95{ height:60vh; min-height:360px; max-height:70vh; overflow:auto;
      background:#fff; color:#000;
      border:2px solid #000; border-right-color:#fff; border-bottom-color:#fff; }
    .row95{ display:grid; grid-template-columns:160px 1fr auto; gap:8px; align-items:flex-start;
      border-bottom:1px solid #9e9e9e; padding:6px 8px; }
    .row95.dim { opacity:.55; }
    .post-text { white-space:pre-wrap; word-break:break-word; }
    .row95 .meta { font-size:12px; color:#333; }
    .row95 .delbtn { margin-left:8px; }
  </style>
</head>
<body class="win95-bg">
  <div class="window95" style="max-width:980px; margin:24px auto 80px;">
    <div class="titlebar95">
      <div class="icon"></div>
      <div class="title">BROADCAST.EXE — Ночной эфир</div>
      <div class="controls95">
        <!-- убрали ссылку на profile.html как legacy -->
        <button class="btn95 tb95" onclick="history.back()">×</button>
      </div>
    </div>

    <!-- Меню под синей панелью -->
    <div class="menubar95">
      <div class="menu95" id="menu-admin" title="Войти как админ / открыть панель">Admin ▾</div>
    </div>

    <div class="toolbar95" style="justify-content:space-between;">
      <div>Ник:&nbsp;
        <input id="nickname" class="input95" placeholder="Введите ник" maxlength="20" style="width:140px;" />
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        <label for="ttl" style="color:#000;">Время жизни:</label>
        <select id="ttl" class="input95">
          <option value="10">10 минут</option>
          <option value="20">20 минут</option>
          <option value="30" selected>30 минут</option>
        </select>
        <span class="badge95">Сеанс: <span id="sessionLabel"></span></span>
        <span class="badge95">До рассвета: <span id="left"></span></span>
      </div>
    </div>

    <div class="panel95">
      <div id="feed" class="feed95"></div>
      <div class="status95" style="gap:8px; align-items:center; flex-wrap:wrap;">
        <input id="msg" class="input95" placeholder="Сказать в эфир…" maxlength="600" style="flex:1; min-width:240px;" />
        <button class="btn95" id="send">Отправить</button>
      </div>
      <div class="status95" style="margin-top:6px; font-size:12px; color:#000;">
        ⚠️ Ник не закрепляется и может быть занят кем угодно. Проверяйте, кому верить.
      </div>
      <div class="status95" style="margin-top:6px; font-size:12px;">
        Сообщения старше 10 минут блекнут, старше 30 — исчезают. Лента обнуляется в 06:00 (Europe/Amsterdam).
      </div>
    </div>
  </div>

  <!-- Скрипты: firebase, меню, эфир -->
  <script type="module" src="firebase.js"></script>
  <script type="module" src="admin-menu.js"></script>
  <script type="module" src="broadcast.firebase.js"></script>
</body>
</html>
